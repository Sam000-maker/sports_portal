{% load nav_active %}
<ul class="nav flex-column nav-pills sidebar-nav p-3 gap-1">

  <!-- Dashboard -->
  <li class="nav-item">
    <a class="nav-link d-flex align-items-center {% active 'backoffice:dashboard' %}"
       href="{% url 'backoffice:dashboard' %}">
      <i class="bi bi-speedometer2 me-2"></i>
      <span>Dashboard</span>
    </a>
  </li>

  <!-- Users -->
  <li class="nav-item">
    <a class="nav-link d-flex align-items-center {% active 'accounts:users_list' %}"
       href="{% url 'accounts:users_list' %}">
      <i class="bi bi-people me-2"></i>
      <span>Users</span>
    </a>
  </li>

  <!-- Player Requests (admins + coaches only) -->
  {% if request.user.is_superuser or request.user.role == 'admin' or request.user.role == 'coach' %}
  <li class="nav-item">
    <a class="nav-link d-flex align-items-center {% active 'accounts:player_requests_list' %}"
       href="{% url 'accounts:player_requests_list' %}">
      <i class="bi bi-person-check me-2"></i>
      <span>Player Requests</span>
    </a>
  </li>
  {% endif %}

  <!-- Admissions -->
  <li class="nav-item mt-3">
    <span class="text-uppercase small text-muted ps-2">Admissions</span>
  </li>

  {% if request.user.is_staff or request.user.role == 'admin' or request.user.role == 'staff' %}
    <li class="nav-item">
      <a class="nav-link d-flex align-items-center {% active 'admissions:admin_cycle' %}"
         href="{% url 'admissions:admin_cycle' %}">
        <i class="bi bi-sliders me-2"></i>
        <span>Admissions Control</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link d-flex align-items-center {% active 'admissions:my_applications' %}"
         href="{% url 'admissions:my_applications' %}">
        <i class="bi bi-collection me-2"></i>
        <span>All Applications</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link d-flex align-items-center {% active 'admissions:application_create' %}"
         href="{% url 'admissions:application_create' %}">
        <i class="bi bi-file-earmark-plus me-2"></i>
        <span>Apply via Sports Quota</span>
      </a>
    </li>
  {% else %}
    <li class="nav-item">
      <a class="nav-link d-flex align-items-center {% active 'admissions:application_create' %}"
         href="{% url 'admissions:application_create' %}">
        <i class="bi bi-file-earmark-plus me-2"></i>
        <span>Apply via Sports Quota</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link d-flex align-items-center {% active 'admissions:my_applications' %}"
         href="{% url 'admissions:my_applications' %}">
        <i class="bi bi-collection me-2"></i>
        <span>My Applications</span>
      </a>
    </li>
  {% endif %}

  <!-- Teams & Positions -->
  <li class="nav-item mt-3">
    <span class="text-uppercase small text-muted ps-2">Teams & Positions</span>
  </li>
  <li class="nav-item">
    <a class="nav-link d-flex align-items-center {% active 'players:team_list' %}"
       href="{% url 'players:team_list' %}">
      <i class="bi bi-people-fill me-2"></i>
      <span>Teams</span>
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link d-flex align-items-center {% active 'players:team_create' %}"
       href="{% url 'players:team_create' %}">
      <i class="bi bi-plus-square me-2"></i>
      <span>Create Team</span>
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link d-flex align-items-center {% active 'players:position_admin' %}"
       href="{% url 'players:position_admin' %}">
      <i class="bi bi-diagram-3 me-2"></i>
      <span>Positions & Formations</span>
    </a>
  </li>

  <!-- Facilities -->
  <li class="nav-item mt-3">
    <span class="text-uppercase small text-muted ps-2">Facilities</span>
  </li>
  <!-- Admin/Coach explicit list -->
  <li class="nav-item">
    <a class="nav-link d-flex align-items-center {% active 'facilities:venue_list_admin' %}"
       href="{% url 'facilities:venue_list_admin' %}">
      <i class="bi bi-building me-2"></i>
      <span>Venues (Admin)</span>
    </a>
  </li>
  <!-- Student-view list (useful for quick QA) -->
  <li class="nav-item">
    <a class="nav-link d-flex align-items-center {% active 'facilities:venue_list_student' %}"
       href="{% url 'facilities:venue_list_student' %}">
      <i class="bi bi-building-check me-2"></i>
      <span>Venues (Student View)</span>
    </a>
  </li>
  <!-- Role-switched (existing) -->
  <li class="nav-item">
    <a class="nav-link d-flex align-items-center {% active 'facilities:venue_list' %}"
       href="{% url 'facilities:venue_list' %}">
      <i class="bi bi-buildings me-2"></i>
      <span>Venues (Auto)</span>
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link d-flex align-items-center {% active 'facilities:venue_new' %}"
       href="{% url 'facilities:venue_new' %}">
      <i class="bi bi-building-add me-2"></i>
      <span>Add Venue</span>
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link d-flex align-items-center {% active 'facilities:booking_new' %}"
       href="{% url 'facilities:booking_new' %}">
      <i class="bi bi-calendar-plus me-2"></i>
      <span>New Booking</span>
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link d-flex align-items-center {% active 'facilities:booking_list_admin' %}"
       href="{% url 'facilities:booking_list_admin' %}">
      <i class="bi bi-calendar2-week me-2"></i>
      <span>All Bookings</span>
    </a>
  </li>

  <!-- Tournaments -->
  <li class="nav-item mt-3">
    <span class="text-uppercase small text-muted ps-2">Tournaments</span>
  </li>

  {# Admin view #}
  {% if request.user.is_staff or request.user.role == 'admin' or request.user.role == 'staff' %}
    <li class="nav-item">
      <a class="nav-link d-flex align-items-center {% active 'tournaments:admin_list' %}"
         href="{% url 'tournaments:admin_list' %}">
        <i class="bi bi-trophy me-2"></i>
        <span>Admin Tournaments</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link d-flex align-items-center {% active 'tournaments:tournament_new' %}"
         href="{% url 'tournaments:tournament_new' %}">
        <i class="bi bi-trophy-fill me-2"></i>
        <span>Create Tournament</span>
      </a>
    </li>
  {% endif %}

  {# Coach view #}
  {% if request.user.role == 'coach' %}
    <li class="nav-item">
      <a class="nav-link d-flex align-items-center {% active 'tournaments:coach_list' %}"
         href="{% url 'tournaments:coach_list' %}">
        <i class="bi bi-trophy me-2"></i>
        <span>Coach Tournaments</span>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link d-flex align-items-center {% active 'tournaments:tournament_new' %}"
         href="{% url 'tournaments:tournament_new' %}">
        <i class="bi bi-trophy-fill me-2"></i>
        <span>Create Tournament</span>
      </a>
    </li>
  {% endif %}

  {# Quick QA links to public/student views #}
  <li class="nav-item">
    <a class="nav-link d-flex align-items-center {% active 'tournaments:tournament_list' %}"
       href="{% url 'tournaments:tournament_list' %}">
      <i class="bi bi-trophy me-2"></i>
      <span>All Tournaments (Public)</span>
    </a>
  </li>
  <li class="nav-item">
    <a class="nav-link d-flex align-items-center {% active 'tournaments:student_list' %}"
       href="{% url 'tournaments:student_list' %}">
      <i class="bi bi-mortarboard me-2"></i>
      <span>Student View</span>
    </a>
  </li>

</ul>
